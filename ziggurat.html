<!DOCTYPE html>
<html>
<head>
<title>Project Ziggurat</title>
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<!-- bootstrap, threejs, other libs (jquery?) -->
<script src="js/three.min.js"></script>
<script src="js/OrbitControls.js"></script>
<!-- <script src="demo.js"></script> -->

</head>
<body>
    <div width='100%'>
        <h1>Project Ziggurat</h1> 
    </div>
<div id='container'></div>
<div id='controls'></div>
<!-- 
<div>
    <div id='renderSection' width='70%'>
        <p>Render some stuff here</p>
    </div>
    <div id='controlPanel'>
        <form>
            <label for='xSlider'>X Height</label>
        </form>
    </div>
</div> -->
<script type='text/javascript'>

    var container, camera, controls, scene, renderer;

    // Set the scene size.
    var WIDTH = 400;
    var HEIGHT = 300;
    
    // Get the DOM element to attach to
    container =
        document.querySelector('#container');

    init();
    render();
    
    // Schedule the first frame.
    //requestAnimationFrame(animate);

    function init() {
        renderer = new THREE.WebGLRenderer();
        
        // Start the renderer.
        renderer.setSize(WIDTH, HEIGHT);
        createCamera();
        createScene();
        
        // Add the camera to the scene.
        scene.add(camera);

        
        // Attach the renderer-supplied
        // DOM element.
        container.appendChild(renderer.domElement);
        createStartingZiggurat(20, 20, 20);
        createLight();
        createOrbitControls();
    }
    
    function createScene() {
        scene = new THREE.Scene();
    }

    function createCamera() {
        // Set some camera attributes.
        VIEW_ANGLE = 45;
        ASPECT = WIDTH / HEIGHT;
        NEAR = 0.1;
        FAR = 10000;

        camera =
        new THREE.PerspectiveCamera(
            VIEW_ANGLE,
            ASPECT,
            NEAR,
            FAR
        );
    }
    
    function createStartingZiggurat(topHeight, medHeight, lowHeight) {
        var topMaterial = new THREE.MeshBasicMaterial({
            color : 0x00ff00
        });

        var midMaterial = new THREE.MeshBasicMaterial({
            color : 0xff0000
        });

        var botMaterial = new THREE.MeshBasicMaterial({
            color : 0x0000ff
        });

        var TOPWIDTH = 20;
        var MIDWIDTH = 40;
        var BOTWIDTH = 60;

        var topGeometry = new THREE.CubeGeometry(TOPWIDTH, topHeight, TOPWIDTH)
        var topCube = new THREE.Mesh(topGeometry, topMaterial);
        topCube.position.z = -250;
        topCube.position.y = (topHeight + medHeight) / 2;
        scene.add(topCube);

        var medGeometry = new THREE.CubeGeometry(MIDWIDTH, medHeight, MIDWIDTH)
        var medCube = new THREE.Mesh(medGeometry, midMaterial);
        medCube.position.z = -250;
        medCube.position.y = 0;
        scene.add(medCube);

        var lowGeometry = new THREE.CubeGeometry(BOTWIDTH, lowHeight, BOTWIDTH)
        var lowCube = new THREE.Mesh(lowGeometry, botMaterial);
        lowCube.position.z = -250;
        lowCube.position.y = -((lowHeight + medHeight) / 2);
        scene.add(lowCube);
    }

    function createLight() {
            
        // create a point light
        var pointLight =
        new THREE.PointLight(0xFFFFFF);

        // set its position
        pointLight.position.x = 10;
        pointLight.position.y = 50;
        pointLight.position.z = 130;

        // add to the scene
        scene.add(pointLight);
    }

    function createOrbitControls() {
        controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.addEventListener('change', render);
        controls.enableZoom = false;
    }

    function animate() {
        requestAnimationFrame(animate);
        controls.update();
        render()
    }

    function render() {
        renderer.render( scene, camera );
    }

</script>
</body>
</html>
